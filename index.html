<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TOC TOC TOC - Contra o Bullying</title>
    <style>
        :root { --bg: #fdfdfd; --alert: #d32f2f; --primary: #00796b; }
        body { font-family: 'Segoe UI', Arial, sans-serif; background: #eceff1; margin: 0; display: flex; justify-content: center; align-items: center; min-height: 100vh; }
        .app-container { width: 100%; max-width: 400px; height: 95vh; background: white; border-radius: 25px; box-shadow: 0 15px 35px rgba(0,0,0,0.2); display: flex; flex-direction: column; overflow: hidden; }
        .tela { display: none; flex-direction: column; align-items: center; padding: 20px; height: 100%; box-sizing: border-box; overflow-y: auto; }
        .ativa { display: flex; }
        h2 { color: var(--primary); font-size: 1.3rem; text-align: center; margin-bottom: 10px; }
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; width: 100%; }
        .btn-card { background: #fff; border: 3px solid #eee; border-radius: 20px; padding: 10px; cursor: pointer; text-align: center; transition: 0.2s; }
        .btn-card:active { transform: scale(0.95); border-color: var(--alert); }
        .btn-card img { width: 80px; height: 80px; object-fit: contain; }
        .btn-card p { font-size: 12px; font-weight: bold; margin: 8px 0 0; color: #555; }
        .btn-final { background: var(--primary); color: white; border: none; padding: 15px; border-radius: 10px; width: 100%; font-weight: bold; margin-top: 20px; cursor: pointer; }
    </style>
</head>
<body>

<div class="app-container">

    <div id="t1" class="tela ativa">
        <h2>Quem é o Tatu?</h2>
        <input type="text" id="nome-tatu" placeholder="Apelido do seu filho..." style="width:100%; padding:15px; border-radius:10px; border:1px solid #ccc;">
        <button class="btn-final" onclick="proxima(2)">ENTRAR NO APP</button>
    </div>

    <div id="t2" class="tela">
        <h2>O que houve na escola?</h2>
        <div class="grid">
            <div class="btn-card" onclick="registrar('Bullying', 'Me zoaram/Riram de mim')">
                <img src="grupo_bullying.png"><p>ME ZOARAM</p>
            </div>
            <div class="btn-card" onclick="registrar('Exclusão', 'Professor me pôs pra fora')">
                <img src="porta_batida.png"><p>FUI PRA FORA</p>
            </div>
            <div class="btn-card" onclick="registrar('Agressão', 'Alguém me bateu/empurrou')">
                <img src="sensacao_raio.png"><p>ME BATERAM</p>
            </div>
            <div class="btn-card" onclick="registrar('Isolamento', 'Fiquei sozinho no recreio')">
                <img src="grupo_sozinho.png"><p>SOZINHO</p>
            </div>
        </div>
        <p style="font-size: 11px; margin-top: 20px; color: #999;">Bata na imagem para contar aos pais.</p>
    </div>

    <div id="t3" class="tela">
        <h2>Onde isso aconteceu?</h2>
        <div class="grid">
            <div class="btn-card" onclick="finalizar('Sala de Aula')"><img src="sala.png"><p>SALA</p></div>
            <div class="btn-card" onclick="finalizar('Corredor')"><img src="corredor.png"><p>CORREDOR</p></div>
            <div class="btn-card" onclick="finalizar('Pátio')"><img src="patio.png"><p>PÁTIO</p></div>
            <div class="btn-card" onclick="finalizar('Banheiro')"><img src="corredor.png"><p>BANHEIRO</p></div>
        </div>
    </div>

    <div id="t4" class="tela">
        <h2 style="color:var(--alert)">RELATÓRIO DE PROTEÇÃO</h2>
        <div id="lista-logs" style="width:100%; font-size: 13px;"></div>
        <button class="btn-final" onclick="proxima(2)">NOVA DENÚNCIA</button>
        <p style="font-size: 10px; color: #666; margin-top: 15px;">Estes dados comprovam padrões de bullying para a escola.</p>
    </div>

</div>

<script>
    let logAtual = {};

    function proxima(n) {
        document.querySelectorAll('.tela').forEach(t => t.classList.remove('ativa'));
        document.getElementById('t'+n).classList.add('ativa');
        if(n === 4) exibirLogs();
    }

    function registrar(tipo, detalhe) {
        logAtual.tipo = tipo;
        logAtual.detalhe = detalhe;
        proxima(3);
    }

    function finalizar(local) {
        const nome = document.getElementById('nome-tatu').value;
        const data = new Date();
        const novoRegistro = {
            crianca: nome || 'Tatu',
            evento: logAtual.tipo,
            info: logAtual.detalhe,
            local: local,
            hora: data.toLocaleDateString() + ' ' + data.toLocaleTimeString().substring(0,5)
        };

        let historico = JSON.parse(localStorage.getItem('toctoc_denuncias')) || [];
        historico.push(novoRegistro);
        localStorage.setItem('toctoc_denuncias', JSON.stringify(historico));
        proxima(4);
    }

    function exibirLogs() {
        const historico = JSON.parse(localStorage.getItem('toctoc_denuncias')) || [];
        const container = document.getElementById('lista-logs');
        container.innerHTML = historico.reverse().map(l => `
            <div style="border-left: 4px solid var(--alert); padding: 10px; margin-bottom: 10px; background: #fff5f5;">
                <strong>${l.hora} - ${l.evento}</strong><br>
                <span>${l.info} na <strong>${l.local}</strong></span>
            </div>
        `).join('');
    }
</script>
</body>
</html>
